{"ast":null,"code":"import { BehaviorSubject, Subscription, switchMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/search-form.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../../directives/border-color.directive\";\nimport * as i4 from \"../item/item/item.component\";\nimport * as i5 from \"../../../../pipes/sort.pipe\";\nimport * as i6 from \"../../../../pipes/filter-word.pipe\";\n\nfunction ItemsListComponent_app_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-item\", 2);\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"item\", item_r1)(\"itemPicURL\", item_r1.snippet.thumbnails.high.url)(\"itemViews\", item_r1.statistics == null ? null : item_r1.statistics.viewCount)(\"itemLikes\", item_r1.statistics == null ? null : item_r1.statistics.likeCount)(\"itemDislikes\", item_r1.statistics == null ? null : item_r1.statistics.dislikeCount)(\"itemComments\", item_r1.statistics == null ? null : item_r1.statistics.commentCount)(\"itemTitle\", item_r1.snippet.title.length >= 55 ? item_r1.snippet.title.slice(0, 55) + \"...\" : item_r1.snippet.title)(\"itemDate\", item_r1.snippet.publishedAt);\n  }\n}\n\nlet ItemsListComponent = /*#__PURE__*/(() => {\n  class ItemsListComponent {\n    constructor(searchFormService) {\n      this.searchFormService = searchFormService;\n      this.items = this.getItems();\n      this.searchValue = '';\n      this.title = '';\n      this.subscriptions = new Subscription();\n      this.responseItems = new BehaviorSubject(this.searchFormService.getSearchResults());\n    }\n\n    getItems() {\n      if (sessionStorage === null) {\n        return [];\n      }\n\n      return JSON.parse(sessionStorage.getItem('items-list'));\n    }\n\n    ngOnInit() {\n      this.searchFormService.currentFilterValue$.subscribe(value => this.filterInputNew = value);\n      this.searchFormService.currentSortState$.subscribe(value => this.sortStateNew = value);\n      const subscription = this.getSearchValue$().pipe(switchMap(val => this.getSearchResults$(val))).subscribe(val => {\n        this.items = val;\n        sessionStorage.setItem('items-list', JSON.stringify(this.items));\n        this.responseItems.next(val);\n      });\n      this.subscriptions.add(subscription);\n    }\n\n    getSearchValue$() {\n      return this.searchFormService.getSearchValue$();\n    }\n\n    getSearchResults$(val) {\n      return this.searchFormService.getSearchResults$(val);\n    }\n\n    ngOnDestroy() {\n      this.subscriptions.unsubscribe();\n    }\n\n  }\n\n  ItemsListComponent.ɵfac = function ItemsListComponent_Factory(t) {\n    return new (t || ItemsListComponent)(i0.ɵɵdirectiveInject(i1.SearchFormService));\n  };\n\n  ItemsListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ItemsListComponent,\n    selectors: [[\"app-items-list\"]],\n    decls: 4,\n    vars: 7,\n    consts: [[1, \"items-list\"], [\"appBorderColor\", \"\", \"class\", \"item\", 3, \"item\", \"itemPicURL\", \"itemViews\", \"itemLikes\", \"itemDislikes\", \"itemComments\", \"itemTitle\", \"itemDate\", 4, \"ngFor\", \"ngForOf\"], [\"appBorderColor\", \"\", 1, \"item\", 3, \"item\", \"itemPicURL\", \"itemViews\", \"itemLikes\", \"itemDislikes\", \"itemComments\", \"itemTitle\", \"itemDate\"]],\n    template: function ItemsListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, ItemsListComponent_app_item_1_Template, 1, 8, \"app-item\", 1);\n        i0.ɵɵpipe(2, \"sort\");\n        i0.ɵɵpipe(3, \"filter\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(2, 1, i0.ɵɵpipeBind2(3, 4, ctx.items, ctx.filterInputNew), ctx.sortStateNew));\n      }\n    },\n    dependencies: [i2.NgForOf, i3.default, i4.default, i5.default, i6.default],\n    styles: [\".items-list[_ngcontent-%COMP%]{width:70rem;margin:2rem auto;display:grid;justify-items:center;grid-template-columns:repeat(4,1fr);gap:2rem}.item[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;padding:.9rem .9rem 0;height:23rem;background-color:#e5e5e5;border-bottom:.5rem solid;border-radius:1rem;box-shadow:.1rem .1rem .2rem #00004080}\"]\n  });\n  return ItemsListComponent;\n})();\nexport { ItemsListComponent as default };","map":null,"metadata":{},"sourceType":"module"}